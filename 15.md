# '분/시간 카운터'를 설계하고 구현하기

웹 서버에서 1분 동안 그리고 지난 1시간 동안 보낸 바이트를 추적하는 코드를 짜는 예제.

여태까지의 장들에서 (1~14) 나온 내용들을 예제를 통해 어떤 흐름으로 적용하는지 보여준다.

  ##### 1. 클래스 인터페이스 정의하기
    - 이름을 개선하기
      Count(int num_bytes)에 대한 해석에 있어서 사람들의 의견이 갈렸고 명확하지 않은 부분이 있기 때문에 Add()로 바꾸고 int num_bytes도 지나치게 특징적이기 때문에, count라는 이름이 더 낫다. -> Add(int count).
    
    - 주석을 개선하기
      주석이 명확하지 않아서 충돌하는 해석이 나왔기 때문에 주석을 더 정확히 쓴다. 
      e.g 1분 동안의 카운트를 반환한다 -> 지난 60초 동안 누적된 카운트를 반환한다.
      
    => 타인의 의견을 구하기: 타인의 의견을 구하는 행위는 자신의 코드가 "사용자에게 친숙한지" 여부를 확인하는 훌륭한 방법
    
##### 2. 시도1: 순진한 해결책
    
    - 시간을 담고 있는 '이벤트들"의 리스트를 이용
    
    - 해결책은 정확하지만 가독성 관련 두가지의 문제:
      1. for loop가 다소 산만 (가독성이 떨어짐)
      2. MinuteCount()와 HourCount()가 거의 동일. 중복 코드 공유시 코드량 줄이기 가능.
      
   ###### 더 읽기 쉬운 버전
    - int CountSince(time_t cutoff) // MinuteCount와 HourCount에서 사용가능
    
   ###### 성능 문제
    1. 계속 늘어나기만 한다.
    2. MinuteCount()와 HourCount()가 너무 느림
      - 알고리즘적으로 너무 느림 (O(n)만큼의 시간 소요)
    
##### 3. 시도2: 컨베이어 벨트 설계
  - 문제 해결 방법: '2단계' 컨베이어 벨트 설계
  
